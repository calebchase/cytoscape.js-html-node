!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cytoscape-html-node",[],t):"object"==typeof exports?exports["cytoscape-html-node"]=t():e["cytoscape-html-node"]=t()}(self,(function(){return(()=>{var e={849:(e,t,o)=>{var n;!function(){"use strict";var i=function(){function e(e,t){var o=e.node,n=e.position,i=void 0===n?null:n,r=e.data,a=void 0===r?null:r;this.updateParams(t),this._node=o,this.initStyles(t.cssClass),a&&this.updateData(a),i&&this.updatePosition(i)}return e.prototype.updateParams=function(e){var t=e.tpl,o=void 0===t?function(){return""}:t,n=(e.cssClass,e.halign),i=void 0===n?"center":n,r=e.valign,a=void 0===r?"center":r,s=e.halignBox,l=void 0===s?"center":s,d=e.valignBox,c=void 0===d?"center":d,p={top:-.5,left:-.5,center:0,right:.5,bottom:.5};this._align=[p[i],p[a],100*(p[l]-.5),100*(p[c]-.5)],this.tpl=o},e.prototype.updateData=function(e){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);for(var t=(new DOMParser).parseFromString(this.tpl(e),"text/html").body.children,o=0;o<t.length;++o){var n=t[o];this._node.appendChild(n)}},e.prototype.getNode=function(){return this._node},e.prototype.updatePosition=function(e){this._renderPosition(e)},e.prototype.initStyles=function(e){this._node.style.position="absolute",e&&e.length&&this._node.classList.add(e)},e.prototype._renderPosition=function(e){var t=this._position,o=e.x+this._align[0]*e.w,n=e.y+this._align[1]*e.h;if(!t||t[0]!==o||t[1]!==n){this._position=[o,n];var i="translate("+this._align[2]+"%,"+this._align[3]+"%) translate("+o.toFixed(2)+"px,"+n.toFixed(2)+"px) ",r=this._node.style;r.webkitTransform=i,r.msTransform=i,r.transform=i}},e}(),r=function(){function e(e){this._node=e,this._elements={}}return e.prototype.addOrUpdateElem=function(e,t,o){void 0===o&&(o={});var n=this._elements[e];if(n)n.updateParams(t),n.updateData(o.data),n.updatePosition(o.position);else{var r=document.createElement("div");this._node.appendChild(r),this._elements[e]=new i({node:r,data:o.data,position:o.position},t)}},e.prototype.removeElemById=function(e){this._elements[e]&&(this._node.removeChild(this._elements[e].getNode()),delete this._elements[e])},e.prototype.updateElemPosition=function(e,t){var o=this._elements[e];o&&o.updatePosition(t)},e.prototype.updatePanZoom=function(e){var t=e.pan,o=e.zoom,n="translate("+t.x+"px,"+t.y+"px) scale("+o+")",i=this._node.style,r="top left";i.webkitTransform=n,i.msTransform=n,i.transform=n,i.webkitTransformOrigin=r,i.msTransformOrigin=r,i.transformOrigin=r},e}();function a(e,t,o){var n=t&&"object"==typeof t?t:[],i=function(){var t=e.container(),n=document.createElement("div"),i=t.querySelector("canvas"),a=t.querySelector("[class^='cy-node-html']");a&&i.parentNode.removeChild(a);var s=n.style;return s.position="absolute",s["z-index"]=10,s.width="500px",s.margin="0px",s.padding="0px",s.border="0px",s.outline="0px",s.outline="0px",o&&!0!==o.enablePointerEvents&&(s["pointer-events"]="none"),i.parentNode.appendChild(n),new r(n)}();return e.one("render",(function(e){!function(e){var t=e.cy;n.forEach((function(e){t.elements(e.query).forEach((function(t){t.isNode()&&i.addOrUpdateElem(t.id(),e,{position:s(t),data:t.data()})}))}))}(e),a(e)})),e.on("add",(function(e){var t=e.target,o=function(e,t){if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var o,n=e.length>>>0,i=arguments[1],r=0;r<n;r++)if(o=e[r],t.call(i,o,r,e))return o}(n.slice().reverse(),(function(e){return t.is(e.query)}));o&&i.addOrUpdateElem(t.id(),o,{position:s(t),data:t.data()})})),e.on("layoutstop",(function(e){var t=e.cy;n.forEach((function(e){t.elements(e.query).forEach((function(e){e.isNode()&&i.updateElemPosition(e.id(),s(e))}))}))})),e.on("remove",(function(e){i.removeElemById(e.target.id())})),e.on("pan zoom",a),e.on("position bounds",(function(e){i.updateElemPosition(e.target.id(),s(e.target))})),e;function a(e){var t=e.cy;i.updatePanZoom({pan:t.pan(),zoom:t.zoom()})}function s(e){return{w:e.width(),h:e.height(),x:e.position("x"),y:e.position("y")}}}var s=function(e){e&&e("core","nodeHtmlLabel",(function(e,t){return a(this,e,t)}))};e.exports?e.exports=function(e){s(e)}:void 0===(n=function(){return s}.call(t,o,t,e))||(e.exports=n),"undefined"!=typeof cytoscape&&s(cytoscape)}()},358:(e,t,o)=>{"use strict";o.r(t),o.d(t,{register:()=>r});var n=o(849);function i(){function e(e){let t,o=!1;return e.batch((function(){e.nodes().forEach((function(e){if(t=document.getElementById(`htmlLabel:${e.id()}`),null!=t){o=!0;let n=t.parentElement.offsetWidth,i=t.parentElement.offsetHeight;e.style({width:n,height:i})}}))})),o}function t(e,t,o){e.nodeHtmlLabel([{query:o,halign:"center",valign:"center",halignBox:"center",valignBox:"center",cssClass:t.cssClass,tpl:e=>function(e,t){let o;return t.html.replaceAll(/#{.*?}/g,(t=>(o=t.substring("#{data.".length,t.length-1),e[o])))}(e,t)}])}function o(e){let t=document.getElementById(`htmlLabel:${e}`);return null!=t&&(t.parentElement.parentElement.remove(),!0)}function i(e,t){let n=e.elements(t),i=n.length,r=!1;for(let e=0;e<i;e++)if(r=o(n[e].id()),r)return}function r(o,n,r){let a=function(e,o,n){let i=e.zoom();for(let r=0;r<o.length;r++)if(i>=o[r].zoomRange[0]&&i<o[r].zoomRange[1])return t(e,o[r].template,n),o[r].zoomRange}(o,n,r),s=n[0].zoomRange[0],l=!1,d=!1;o.zoom()<s&&!l&&(i(o,r),l=!0,a=[0,n[0].zoomRange[0]],o.batch((()=>{o.$(r).addClass("htmlNodeAltStyle"),o.$(r).removeClass("htmlNodeBaseStyle")})),d=!0),o.on("zoom",(function(c){if(o.removeListener("data"),o.removeListener("style"),o.zoom()<s&&!l&&(i(o,r),l=!0,a=[0,n[0].zoomRange[0]],o.batch((()=>{o.$(r).addClass("htmlNodeAltStyle"),o.$(r).removeClass("htmlNodeBaseStyle")})),d=!0),o.zoom()<a[0]||o.zoom()>a[1])for(let s=0;s<n.length;s++)if(o.zoom()>n[s].zoomRange[0]&&o.zoom()<n[s].zoomRange[1]){t(o,n[s].template,r),e(o),a=n[s].zoomRange,l||i(o,r),d&&(o.batch((()=>{o.$(r).removeClass("htmlNodeAltStyle"),o.$(r).addClass("htmlNodeBaseStyle")})),d=!1),l=!1;break}}))}return window.onload=()=>e(cy),console.log("cytoscape.js-html-node loaded"),{createHtmlNode:function(e,t,o){n(e);for(let e in o)r(t,o[e].template,o[e].query,o[e].defaultColor,o[e].altColor)}}}function r(e){e?e("core","htmlnode",i):console.warn("Attempt to register cytoscape-stickynote with invalid cytoscape instance!")}"undefined"!=typeof cytoscape&&r(cytoscape)}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}return o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o(358)})()}));