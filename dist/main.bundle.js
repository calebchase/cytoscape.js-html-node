!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cytoscape-html-node",[],e):"object"==typeof exports?exports["cytoscape-html-node"]=e():t["cytoscape-html-node"]=e()}(self,(function(){return(()=>{var t={849:(t,e,o)=>{var n;!function(){"use strict";var i=function(){function t(t,e){var o=t.node,n=t.position,i=void 0===n?null:n,r=t.data,a=void 0===r?null:r;this.updateParams(e),this._node=o,this.initStyles(e.cssClass),a&&this.updateData(a),i&&this.updatePosition(i)}return t.prototype.updateParams=function(t){var e=t.tpl,o=void 0===e?function(){return""}:e,n=(t.cssClass,t.halign),i=void 0===n?"center":n,r=t.valign,a=void 0===r?"center":r,s=t.halignBox,l=void 0===s?"center":s,d=t.valignBox,c=void 0===d?"center":d,p={top:-.5,left:-.5,center:0,right:.5,bottom:.5};this._align=[p[i],p[a],100*(p[l]-.5),100*(p[c]-.5)],this.tpl=o},t.prototype.updateData=function(t){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);for(var e=(new DOMParser).parseFromString(this.tpl(t),"text/html").body.children,o=0;o<e.length;++o){var n=e[o];this._node.appendChild(n)}},t.prototype.getNode=function(){return this._node},t.prototype.updatePosition=function(t){this._renderPosition(t)},t.prototype.initStyles=function(t){this._node.style.position="absolute",t&&t.length&&this._node.classList.add(t)},t.prototype._renderPosition=function(t){var e=this._position,o=t.x+this._align[0]*t.w,n=t.y+this._align[1]*t.h;if(!e||e[0]!==o||e[1]!==n){this._position=[o,n];var i="translate("+this._align[2]+"%,"+this._align[3]+"%) translate("+o.toFixed(2)+"px,"+n.toFixed(2)+"px) ",r=this._node.style;r.webkitTransform=i,r.msTransform=i,r.transform=i}},t}(),r=function(){function t(t){this._node=t,this._elements={}}return t.prototype.addOrUpdateElem=function(t,e,o){void 0===o&&(o={});var n=this._elements[t];if(n)n.updateParams(e),n.updateData(o.data),n.updatePosition(o.position);else{var r=document.createElement("div");this._node.appendChild(r),this._elements[t]=new i({node:r,data:o.data,position:o.position},e)}},t.prototype.removeElemById=function(t){this._elements[t]&&(this._node.removeChild(this._elements[t].getNode()),delete this._elements[t])},t.prototype.updateElemPosition=function(t,e){var o=this._elements[t];o&&o.updatePosition(e)},t.prototype.updatePanZoom=function(t){var e=t.pan,o=t.zoom,n="translate("+e.x+"px,"+e.y+"px) scale("+o+")",i=this._node.style,r="top left";i.webkitTransform=n,i.msTransform=n,i.transform=n,i.webkitTransformOrigin=r,i.msTransformOrigin=r,i.transformOrigin=r},t}();function a(t,e,o){var n=e&&"object"==typeof e?e:[],i=function(){var e=t.container(),n=document.createElement("div"),i=e.querySelector("canvas"),a=e.querySelector("[class^='cy-node-html']");a&&i.parentNode.removeChild(a);var s=n.style;return s.position="absolute",s["z-index"]=10,s.width="500px",s.margin="0px",s.padding="0px",s.border="0px",s.outline="0px",s.outline="0px",o&&!0!==o.enablePointerEvents&&(s["pointer-events"]="none"),i.parentNode.appendChild(n),new r(n)}();return t.one("render",(function(t){!function(t){var e=t.cy;n.forEach((function(t){e.elements(t.query).forEach((function(e){e.isNode()&&i.addOrUpdateElem(e.id(),t,{position:s(e),data:e.data()})}))}))}(t),a(t)})),t.on("add",(function(t){var e=t.target,o=function(t,e){if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o,n=t.length>>>0,i=arguments[1],r=0;r<n;r++)if(o=t[r],e.call(i,o,r,t))return o}(n.slice().reverse(),(function(t){return e.is(t.query)}));o&&i.addOrUpdateElem(e.id(),o,{position:s(e),data:e.data()})})),t.on("layoutstop",(function(t){var e=t.cy;n.forEach((function(t){e.elements(t.query).forEach((function(t){t.isNode()&&i.updateElemPosition(t.id(),s(t))}))}))})),t.on("remove",(function(t){i.removeElemById(t.target.id())})),t.on("pan zoom",a),t.on("position bounds",(function(t){i.updateElemPosition(t.target.id(),s(t.target))})),t;function a(t){var e=t.cy;i.updatePanZoom({pan:e.pan(),zoom:e.zoom()})}function s(t){return{w:t.width(),h:t.height(),x:t.position("x"),y:t.position("y")}}}var s=function(t){t&&t("core","nodeHtmlLabel",(function(t,e){return a(this,t,e)}))};t.exports?t.exports=function(t){s(t)}:void 0===(n=function(){return s}.call(e,o,e,t))||(t.exports=n),"undefined"!=typeof cytoscape&&s(cytoscape)}()},358:(t,e,o)=>{"use strict";o.r(e),o.d(e,{register:()=>r});var n=o(849);function i(){function t(t){let e,o=!1;return t.batch((function(){t.nodes().forEach((function(t){if(e=document.getElementById(`htmlLabel:${t.id()}`),null!=e){o=!0;let n=e.parentElement.offsetWidth,i=e.parentElement.offsetHeight;t.style({width:n,height:i})}}))})),o}function e(t,e,o){t.nodeHtmlLabel([{query:o,halign:"center",valign:"center",halignBox:"center",valignBox:"center",cssClass:e.cssClass,tpl:t=>function(t,e){let o;return e.html.replaceAll(/#{.*?}/g,(e=>(o=e.substring("#{data.".length,e.length-1),t[o])))}(t,e)}])}function o(t){let e=document.getElementById(`htmlLabel:${t}`);return null!=e&&(e.parentElement.parentElement.remove(),!0)}function i(t,e){let n=t.elements(e),i=n.length,r=!1;for(let t=0;t<i;t++)if(r=o(n[t].id()),r)return}function r(o,n,r){let a=function(t,o,n){let i=t.zoom();for(let r=0;r<o.length;r++)if(i>=o[r].zoomRange[0]&&i<o[r].zoomRange[1])return e(t,o[r].template,n),o[r].zoomRange}(o,n,r),s=n[0].zoomRange[0],l=!1,d=!1;o.zoom()<s&&!l&&(i(o,r),l=!0,a=[0,n[0].zoomRange[0]],o.batch((()=>{o.$(r).addClass("htmlNodeAltStyle"),o.$(r).removeClass("htmlNodeBaseStyle")})),d=!0),o.on("zoom",(function(c){if(o.removeListener("data"),o.removeListener("style"),o.zoom()<s&&!l&&(i(o,r),l=!0,a=[0,n[0].zoomRange[0]],o.batch((()=>{o.$(r).addClass("htmlNodeAltStyle"),o.$(r).removeClass("htmlNodeBaseStyle")})),d=!0),o.zoom()<a[0]||o.zoom()>a[1])for(let s=0;s<n.length;s++)if(o.zoom()>n[s].zoomRange[0]&&o.zoom()<n[s].zoomRange[1]){e(o,n[s].template,r),t(o),a=n[s].zoomRange,l||i(o,r),d&&(o.batch((()=>{o.$(r).removeClass("htmlNodeAltStyle"),o.$(r).addClass("htmlNodeBaseStyle")})),d=!1),l=!1;break}}))}return window.onload=()=>t(cy),{createHtmlNode:function(t,e,o){n(t);for(let t in o)r(e,o[t].template,o[t].query,o[t].defaultColor,o[t].altColor)}}}function r(t){t?t("core","htmlnode",i):console.warn("Attempt to register cytoscape-stickynote with invalid cytoscape instance!")}"undefined"!=typeof cytoscape&&r(cytoscape)}},e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,o),i.exports}return o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(358)})()}));